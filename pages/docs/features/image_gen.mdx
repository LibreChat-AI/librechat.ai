---
title: Image Generation & Editing
description: Comprehensive guide to LibreChat's built-in image generation and editing tools
---

## Image Generation & Editing

LibreChat comes with **four built-in image tools** that you can add to an **[Agent](/docs/features/agents).**

Each has its own look, price-point, and setup step (usually just an API key or URL).

| Tool | Best for | Needs |
|------|----------|-------|
| **OpenAI Image Tools** | Cutting-edge results (GPT-Image-1).<br/>Can also ***edit*** the images you upload. | OpenAI paid account + key |
| **DALL·E (3 / 2)** | Legacy OpenAI Image models. | OpenAI key |
| **Stable Diffusion** | Local or self-hosted generation, endless community models. | Running Automatic1111 (or other) server |
| **Flux** | Fast cloud renders, optional fine-tunes. | Flux API key |

**Notes:**
- API keys can be omitted in favor of allowing the user to enter their own key from the UI.

---

## 1 · OpenAI Image Tools (recommended)

### Features
- **Create** brand-new images from text prompts (no upload required).  
- **Edit** or **remix** the images you just uploaded—change colours, add objects, extend the canvas, etc.
- Uses OpenAI's latest image generation model, **GPT-Image-1**, for superior instruction following, text rendering, detailed editing, real-world knowledge
- See OpenAI's [Image Generation documentation](https://platform.openai.com/docs/guides/image-generation?image-generation-model=gpt-image-1) for more details.

#### Generation vs. Editing
| Use-case | Invokes |
|----------|---------------|
| "Start from scratch" | **Image Generation** |
| "Use my uploaded photo(s)" | **Image Editing** |

The agent decides automatically, but the rule of thumb is simple:

- If the user’s last message includes an image, the LLM can choose to "edit" it
- Otherwise, only image generation is possible
    - Image generation is always an option in either scenario.

⚠️ **Important**
- Only the images attached to **the current user message** are sent to OpenAI for editing.  
- Images will stay in scope for "vision" if the "Resend files" model parameter is toggled, but not for "image editing."

### Parameters

The "OpenAI Image Tools" are an agent toolkit made up of 2 separate tools. These are the parameters the LLM can use for each tool.

#### Image Generation
• **prompt** – your description (required)  
• **size** – `auto` (default), `1024x1024` (square), `1536x1024` (landscape), or `1024x1536` (portrait)  
• **quality** – `auto` (default), `high`, `medium`, or `low`  
• **background** – `auto` (default), `transparent`, or `opaque` (transparent requires PNG or WebP format)

#### Image Editing

Note: The image editing tool is only available if the user has uploaded images in the current message.

• **prompt** – your description of the changes (required)  
• **size** – `auto` (default), `1024x1024`, `1536x1024`, `1024x1536`, `256x256`, or `512x512`  
• **quality** – `auto` (default), `high`, `medium`, or `low`

### Setup
Create or reuse an OpenAI key and add to `.env`:

```bash
IMAGE_GEN_OAI_API_KEY=sk-...
# optional extras
IMAGE_GEN_OAI_BASEURL=https://...
IMAGE_GEN_OAI_AZURE_API_VERSION=2023-10-01-preview
```


Then add "OpenAI Image Tools" to your Agent's *Tools* list.

### Advanced Configuration

⚠️ **Note:** Azure OpenAI does not yet support the latest OpenAI image models.

You can customize the tool descriptions and prompt guidance by setting these environment variables:

```bash
# Image Generation Tool Descriptions
IMAGE_GEN_OAI_DESCRIPTION_WITH_FILES=...
IMAGE_GEN_OAI_DESCRIPTION_NO_FILES=...
IMAGE_GEN_OAI_PROMPT_DESCRIPTION=...

# Image Editing Tool Descriptions
IMAGE_EDIT_OAI_DESCRIPTION=...
IMAGE_EDIT_OAI_PROMPT_DESCRIPTION=...
```

---

## 2 · DALL·E (legacy)

DALL·E provides high-quality image generation using OpenAI's legacy image models.

### Parameters
• **prompt** – Text description of the desired image (required, up to 4000 characters)  
• **style** – `vivid` (hyper-real, dramatic - default) or `natural` (less hyper-real)  
• **quality** – `standard` (default) or `hd`  
• **size** – `1024x1024` (default/square), `1792x1024` (wide), or `1024x1792` (tall)

### Setup

```bash
# Required
DALLE_API_KEY=sk-...  # or DALLE3_API_KEY=sk-...

# Optional
DALLE_REVERSE_PROXY=https://...  # Alternative endpoint
DALLE3_BASEURL=https://...  # For Azure or custom endpoints
DALLE3_AZURE_API_VERSION=2023-12-01-preview  # For Azure deployments
DALLE3_SYSTEM_PROMPT=...  # Custom system prompt for DALL·E
```

### Advanced Configuration
For Azure OpenAI deployments, configure both the base URL and API version:

```bash
DALLE3_BASEURL=https://your-resource-name.openai.azure.com/openai/deployments/your-deployment-name
DALLE3_AZURE_API_VERSION=2023-12-01-preview
DALLE3_API_KEY=your-azure-api-key
```

Enable the **DALL·E** tool for the Agent and start prompting.

---

## 3 · Stable Diffusion (local)

Run images entirely on your own machine or server.  
Point LibreChat at any Automatic1111 (or compatible) endpoint and you're set.

### Parameters
• **prompt** – Detailed keywords describing what you want in the image (required)  
• **negative_prompt** – Keywords describing what you want to exclude from the image (required)

The Stable Diffusion implementation uses these default parameters:
- cfg_scale: 4.5
- steps: 22
- width: 1024
- height: 1024

These values are currently fixed but provide good results for most use cases.

### Setup

```bash
SD_WEBUI_URL=http://127.0.0.1:7860  # URL to your Automatic1111 WebUI
```

No API key required—just the reachable URL.

---

## 4 · Flux

Cloud generator with an emphasis on speed and optional fine-tuned models.

### Features
- Fast cloud-based image generation
- Support for fine-tuned models
- Multiple quality levels and aspect ratios
- Raw mode for less processed, more natural-looking images

### Parameters
The Flux tool supports three main actions:

1. **generate** - Create a new image from a text prompt
2. **generate_finetuned** - Create an image using a fine-tuned model
3. **list_finetunes** - List available custom models for the user

For `generate` action:

• **prompt** – Text description for the image (required)  
• **width** – Width in pixels (multiple of 32)  
• **height** – Height in pixels (multiple of 32)  
• **prompt_upsampling** – Whether to perform upsampling on the prompt (default: false)  
• **steps** – Number of diffusion steps (1-50, default: 40)  
• **seed** – Optional seed for reproducibility  
• **safety_tolerance** – Tolerance level for moderation (0-6, default: 6)  
• **endpoint** – Model endpoint to use:
  - `/v1/flux-pro-1.1` (default)
  - `/v1/flux-pro`
  - `/v1/flux-dev`
  - `/v1/flux-pro-1.1-ultra`
• **raw** – Generate less processed images (only for ultra endpoint, default: false)

For `generate_finetuned` action:

• All parameters from `generate` plus:  
• **finetune_id** – ID of the fine-tuned model (required)  
• **finetune_strength** – Strength of the fine-tuning effect (0.1-1.2, default: 1.1)  
• **guidance** – Guidance scale (default: 2.5)  
• **aspect_ratio** – Aspect ratio for ultra models (default: "16:9")  
• **endpoint** – Must be one of:
  - `/v1/flux-pro-finetuned` (default)
  - `/v1/flux-pro-1.1-ultra-finetuned`

### Setup

```bash
FLUX_API_KEY=flux_live_...
FLUX_API_BASE_URL=https://api.us1.bfl.ai   # default is fine for most users
```

Choose the **Flux** tool inside the Agent. Prompts are plain text; one call produces one image.

### Pricing
See the [Flux pricing page](https://docs.bfl.ml/pricing/) for details on costs associated with image generation.

---

## Image Storage and Handling

All generated images are:
1. Saved locally in the configured storage location
2. Displayed directly in the chat interface
3. Available for download by clicking on them

For file storage configuration, refer to the [File Storage documentation](/docs/configuration/file_storage).

---

## Proxy Support

All image generation tools support proxy configuration through the `PROXY` environment variable:

```bash
PROXY=http://your-proxy-url:port
```

This is useful for environments where direct internet access is restricted.

## Error Handling
If any of the tools encounter an error, they will return an error message explaining what went wrong. Common issues include:
- Invalid API key
- API unavailability
- Content policy violations
- Proxy/network issues
- Invalid parameters

---

## Prompt writing tips (any tool)

1. Start with the **subject** and **style** (photo, oil painting, etc.).  
2. Add **composition** and **camera / medium** ("wide-angle shot of…", "watercolour…").  
3. Mention **lighting & mood** ("golden hour", "dramatic shadows").  
4. Finish with **detail keywords** (textures, colours, expressions).  
5. Keep negatives positive—describe what you *want*, not what to avoid.

Example:  

> A cinematic photo of an antique library bathed in warm afternoon sunlight. Tall wooden shelves overflow with leather-bound books, and dust particles shimmer in the light. A single green-shaded banker's lamp illuminates an open atlas on a polished mahogany desk in the foreground. 85 mm lens, shallow depth of field, rich amber tones, ultra-high detail.

