---
title: Apple
description: Learn how to configure LibreChat to use Apple for user authentication.
---

## Apple

### Prerequisites

- An Apple Developer Account. If you don't have one, you can enroll [here](https://developer.apple.com/programs/enroll/).

### Create a New App ID

1. **Log in to the Apple Developer Console:**
   - Visit [Apple Developer](https://developer.apple.com/) and sign in with your Apple ID.

2. **Navigate to Identifiers:**
   - Go to **Certificates, Identifiers & Profiles**.
   - Click on **Identifiers** in the sidebar.

3. **Create a New App ID:**
   - Click the **"+"** button to add a new identifier.
   - Select **App IDs** and click **Continue**.
   - Select **App** and click **Continue**.
   - Enter a **Description** for your App ID.
   - Set the **Bundle ID** (e.g., `com.yourdomain.librechat`).
   - Click **Continue** and then **Register**.

![Create App ID](https://user-images.githubusercontent.com/5569219/59017558-6d643600-8861-11e9-927b-a4952b56f34e.png)
![Select App](https://github.com/user-attachments/assets/7b67c1bb-dea0-4475-ad45-e3c13ad514d5)

4. **Enable "Sign in with Apple":**
   - After creating the App ID, click on it to edit.
   - Under **Capabilities**, find and check **Sign in with Apple**.
   - Click **Save**.

   ![Enable Sign in with Apple](https://user-images.githubusercontent.com/5569219/59017720-dea3e900-8861-11e9-898e-f486c093edd8.png)

### Create a Services ID

1. **Navigate to Identifiers:**
   - In the **Certificates, Identifiers & Profiles** section, click on **Identifiers**.

2. **Create a New Services ID:**
   - Click the **"+"** button.
   - Select **Services IDs** and click **Continue**.
   - Enter a **Description** and **Identifier** (e.g., `com.yourdomain.librechat.services`).
   - Click **Continue** and then **Register**.

   ![Select Services ID](https://user-images.githubusercontent.com/5569219/59017808-16ab2c00-8862-11e9-8beb-4da7bb509b0c.png)
   ![Create Services ID](https://github.com/user-attachments/assets/cac99e43-a6d7-4fb8-890d-eabd87a60e7d)



3. **Configure "Sign in with Apple":**
   - Click on the newly created Services ID.
   - Under **Capabilities**, click **Configure** next to **Sign in with Apple**.
   - Enter your **Domains** and **Return URLs** (e.g., `https://your-domain.com/oauth/apple/callback`).
   - Click **Next** and then **Register**.

   ![Configure Sign in with Apple](https://github.com/user-attachments/assets/9309e1c1-6f98-49fc-a87d-bb5f46e200f7)

4. **Verify Your Domain:**
   - After configuring, click **Download** to get the verification file.
   - Upload the verification file to the root of your domain.
   - Click **Verify** in the Apple Developer Console.

   ![Verify Domain](https://github.com/user-attachments/assets/f522e005-c061-45be-9ecc-bd61c2096a4e)

### Create a Key

1. **Navigate to Keys:**
   - In the **Certificates, Identifiers & Profiles** section, click on **Keys**.

2. **Create a New Key:**
   - Click the **"+"** button.
   - Enter a **Key Name** (e.g., `LibreChatSignInWithApple`).
   - Select **Sign in with Apple** under **Capabilities**.
   - click **Configure** and select the created App ID (e.g., `com.yourdomain.librechat`) and then **Save**
   - Click **Continue** and then **Register**.

   ![Create Key](https://github.com/user-attachments/assets/6db095dd-79dd-485d-a57a-8b1ea523b67f)

   ![Configure Key](https://github.com/user-attachments/assets/30b593ab-b8f3-4d94-b56d-1eeac1900a1f)

![Register a New Key](https://github.com/user-attachments/assets/91aa4d6e-9b5c-4f7c-bb1a-5980015ee15d)


3. **Download the Private Key:**
   - After creating the key, click **Download**.
   - **Important:** Save the `.p8` file securely. You will not be able to download it again.
   - **Key ID:** is needed for the .env file.

![Download Your Key](https://github.com/user-attachments/assets/79e5aefa-9797-4fa7-bdf9-cb4b526ab3dd)


### Configure LibreChat

#### `.env` Configuration

Add the following Apple OAuth2 configuration to your `.env` file:

```bash filename=".env"
DOMAIN_CLIENT=https://your-domain.com # use http://localhost:3080 if not using a custom domain
DOMAIN_SERVER=https://your-domain.com # use http://localhost:3080 if not using a custom domain

# Apple
APPLE_CLIENT_ID=your_service_id
APPLE_TEAM_ID=your_team_id
APPLE_KEY_ID=your_key_id
APPLE_PRIVATE_KEY_PATH=/path/to/AuthKey.p8 # Absolute path to your downloaded .p8 file
APPLE_CALLBACK_URL=/oauth/apple/callback
```

> **Note:** If using Docker, ensure the `.p8` file is accessible within your Docker container and update the `APPLE_PRIVATE_KEY_PATH` accordingly.

#### Restart LibreChat

After updating the `.env` file, restart LibreChat to apply the changes. If you're using Docker, run:

`docker compose up -d`

### Testing the Configuration

1. **Navigate to LibreChat Login Page:**
   - Open your browser and go to your LibreChat instance (e.g., `https://your-domain.com`).

2. **Select "Sign in with Apple":**
   - Click on the **Sign in with Apple** button.

3. **Authenticate:**
   - You will be redirected to Apple's authentication page. Log in with your Apple ID.

4. **Grant Permissions:**
   - Authorize LibreChat to access your Apple account information.

5. **Completion:**
   - Upon successful authentication, you will be redirected back to LibreChat, and your Apple account will be linked.

### Troubleshooting

- **Invalid Redirect URI:**
  - Ensure that the redirect URI in your Apple Developer Console matches exactly with the one in your `.env` file.

- **Private Key Issues:**
  - Ensure that the path to your `.p8` file is correct and that LibreChat has read permissions for the file.

- **Team ID and Key ID Errors:**
  - Double-check that the `APPLE_TEAM_ID` and `APPLE_KEY_ID` in your `.env` file match those in your Apple Developer Account.

---

By following this guide, you should be able to successfully integrate Apple OAuth2 authentication into LibreChat, providing users with a seamless and secure login experience.